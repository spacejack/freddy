<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<!--
Copyright Â© 2016-2018 by Mike Linkovich
https://github.com/spacejack/freddy
-->
<meta name="viewport" content="initial-scale=1, width=device-width"/>
<meta name="mobile-web-app-capable" content="yes"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<meta name="theme-color" content="#000000"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black"/>
<title>Freddy</title>
<meta property="og:title" content="Freddy"/>
<meta property="og:description" content="A fast mobile Reddit reader"/>
<meta property="og:image" content="img/icon.png"/>
<style>:root{--clr-fg:#CCC;--clr-fg-active:rgb(208, 208, 208);--clr-fg-active:color(var(--clr-fg) tint(7%));--clr-bg:#222;--clr-bg-active:rgb(49, 49, 49);--clr-bg-active:color(var(--clr-bg) tint(7%));--clr-line:#999;--clr-border:#888;--clr-border-soft:#555;--clr-link:#ACD;--clr-link-active:#B8EEFF;--clr-ctrl-fg:#DDD;--clr-ctrl-fg-active:rgb(223, 223, 223);--clr-ctrl-fg-active:color(var(--clr-ctrl-fg) tint(7%));--clr-ctrl-bg:#2C2C2C;--clr-ctrl-bg-active:rgb(59, 59, 59);--clr-ctrl-bg-active:color(var(--clr-ctrl-bg) tint(7%));--clr-ctrl-border:#888;--clr-ctrl-fg-disabled:rgba(200,200,200,0.5);--clr-ctrl-bg-disabled:rgba(0,0,0,0.25);--clr-edit-bg-active:rgba(255, 255, 255, 0.1);--clr-hotspot-fg-active:#DDD;--clr-hotspot-bg:#2E353A;--clr-hotspot-bg-active:#3E484F;--clr-panelhead-fg:rgb(194, 194, 194);--clr-panelhead-fg:color(var(--clr-fg) shade(5%));--clr-panelhead-bg:#333;--clr-panelhead-shadow:rgba(0,0,0,0.5);--clr-btn-panelnav-fg:#CCC;--clr-btn-panelnav-fg-active:rgb(230, 230, 230);--clr-btn-panelnav-fg-active:color(var(--clr-btn-panelnav-fg) tint(50%));--clr-btn-panelnav-bg:#222;--clr-btn-panelnav-bg-active:rgb(31, 31, 31);--clr-btn-panelnav-bg-active:color(var(--clr-btn-panelnav-bg) shade(10%));--clr-code-fg:#6DA;--clr-code-bg:#303030;--clr-article-bg:rgb(43, 43, 43);--clr-article-bg:color(var(--clr-bg) tint(4%));--clr-btn-deletesub-bg:rgb(56, 56, 56);--clr-btn-deletesub-bg:color(var(--clr-bg) tint(10%));--clr-btn-deletesub-bg-active:#A10;--clr-viewer-fg:#CCC;--clr-menu-fg:#CCC;--clr-menu-bg:rgba(0,0,0,0.75)}body,html{height:100%}body,button,input,select{font-family:helvetica,arial,sans-serif}body{margin:0;padding:0;font-size:16px}html{-webkit-tap-highlight-color:transparent;-webkit-text-size-adjust:none;-ms-text-size-adjust:none}select{font-size:1em;padding:.5em;margin:0}select:disabled{cursor:default}button{font-size:1em;border-width:1px;border-style:solid;padding:.5em 1.5em;margin:0;cursor:pointer}button::-moz-focus-inner{border:0;padding:0}button:disabled{cursor:default}input[type=text]{font-size:1.2em;margin:0;padding:.2em;background-color:rgba(255,255,255,.05);border-width:1px}input[type=checkbox]{display:inline-block;-webkit-transform:scale(1.8,1.8);transform:scale(1.8,1.8);padding:0;margin:.9em 1em .5em .9em}a{text-decoration:none;color:#acd;color:var(--clr-link)}p{margin:.4em 0 .2em 0}blockquote{margin:.1em 0 0 .7em;padding:0;font-style:italic;font-size:.95em}ol,ul{margin:0 0 0 1em;padding:0}li{margin:.05em 0 .05em 0;padding:0}h1{font-size:1.5em;font-weight:700;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}h2{font-size:1.3em;font-weight:700;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}h3{font-size:1.2em;font-weight:700}h4{font-size:1.1em;font-weight:400}hr{border:none;height:1px;margin:0;padding:0}pre{padding:.35em .5em;margin:.1em .5em .1em 0;overflow-x:auto}code{font-family:consolas,monospace;font-size:.875em}body{color:#ccc;color:var(--clr-fg);background-color:#222;background-color:var(--clr-bg)}button,input,select,textarea{-webkit-tap-highlight-color:rgba(255,255,255,.1);-webkit-tap-highlight-color:var(--clr-edit-bg-active)}select{color:#ddd;color:var(--clr-ctrl-fg);background-color:#2c2c2c;background-color:var(--clr-ctrl-bg);border-color:#888;border-color:var(--clr-ctrl-border)}select:disabled{color:rgba(200,200,200,.5);color:var(--clr-ctrl-fg-disabled);background-color:rgba(0,0,0,.25);background-color:var(--clr-ctrl-bg-disabled)}button{color:#ddd;color:var(--clr-ctrl-fg);background-color:#2c2c2c;background-color:var(--clr-ctrl-bg);border-color:#888;border-color:var(--clr-ctrl-border)}button:active{color:#dfdfdf;color:var(--clr-ctrl-fg-active);background-color:#3b3b3b;background-color:var(--clr-ctrl-bg-active)}button:disabled{color:rgba(200,200,200,.5);color:var(--clr-ctrl-fg-disabled);background-color:rgba(0,0,0,.25);background-color:var(--clr-ctrl-bg-disabled)}input[type=text]{color:#ddd;color:var(--clr-ctrl-fg);border-color:#555;border-color:var(--clr-border-soft)}a{color:#acd;color:var(--clr-link)}hr{background-color:#999;background-color:var(--clr-line)}pre{background-color:#303030;background-color:var(--clr-code-bg)}code{color:#6da;color:var(--clr-code-fg)}.freddy{position:fixed;left:0;top:0;width:100%;height:100%;overflow:hidden}.small{font-size:.75em}.svg-logo{height:1.1em;width:1.1em;vertical-align:bottom;margin-right:.5em}.btn-panelnav{display:inline-block;padding:0 .5em;cursor:pointer}.clickable{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.content-loading{text-align:center;margin-top:3em;font-size:.8em;font-style:italic;opacity:0;-webkit-animation-name:content-loading-fade-in;animation-name:content-loading-fade-in;-webkit-animation-delay:.5s;animation-delay:.5s;-webkit-animation-duration:.3s;animation-duration:.3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes content-loading-fade-in{from{opacity:0}to{opacity:1}}@keyframes content-loading-fade-in{from{opacity:0}to{opacity:1}}.btn-panelnav{color:#ccc;color:var(--clr-btn-panelnav-fg);background-color:#222;background-color:var(--clr-btn-panelnav-bg)}.btn-panelnav:active{color:#e6e6e6;color:var(--clr-btn-panelnav-fg-active);background-color:#1f1f1f;background-color:var(--clr-btn-panelnav-bg-active)}.panel{position:absolute;left:0;right:0;width:100%;height:100%;display:flex;flex-direction:column;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}.panel-head{width:100%;height:2.25em;line-height:1.3em;font-weight:700;font-size:1.4em;padding:.5em .3em;box-sizing:border-box;z-index:10;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.panel-content{height:100%;overflow-y:scroll;-webkit-overflow-scrolling:touch}.panel-head{color:#c2c2c2;color:var(--clr-panelhead-fg);background-color:#333;background-color:var(--clr-panelhead-bg);box-shadow:0 5px 10px rgba(0,0,0,.5);box-shadow:0 5px 10px var(--clr-panelhead-shadow)}.panel-feed{box-shadow:0 0 50px rgba(0,0,0,.75)}.item-list{-webkit-animation-name:item-list-fade-in;animation-name:item-list-fade-in;-webkit-animation-duration:.3s;animation-duration:.3s}.item-list .item{display:table;width:100%}.item-list .item .left{display:table-cell;padding:0 .5em .4em .5em}.item-list .item .right{display:table-cell;font-size:1.125em;font-weight:700;text-align:center;vertical-align:bottom;margin-right:.5em;padding-bottom:.3em;width:4em;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.item-list .item .right p{white-space:nowrap}.item-list .item .thumb{float:left;margin-right:.5em;margin-top:.73em;width:2.5em;height:2.5em;transition:opacity .25s ease-in-out;opacity:0;background-size:cover;background-position:center;cursor:pointer}.item-list .item .thumb svg{margin:12.5% 0 0 12.5%;width:75%;height:75%;opacity:.6;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}.item-list .item .thumb.show{opacity:1}.item-list .item .title{font-size:1.2em;font-weight:400;margin:.5em 0 0 0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.item-list .item .details{font-size:.8em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.item-list .item:not(:first-child){border-top-style:solid;border-top-width:1px}@-webkit-keyframes item-list-fade-in{from{opacity:0}to{opacity:1}}@keyframes item-list-fade-in{from{opacity:0}to{opacity:1}}.loadmore-block{text-align:center;padding:.7em 0;box-shadow:inset 0 .5em 15px rgba(0,0,0,.25);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}.panel-feed{background-color:#222;background-color:var(--clr-bg)}.item-list .item .right{background-color:#2e353a;background-color:var(--clr-hotspot-bg)}.item-list .item .right:active{color:#ddd;color:var(--clr-hotspot-fg-active);background-color:#3e484f;background-color:var(--clr-hotspot-bg-active)}.item-list .item .title:active{background-color:#313131;background-color:var(--clr-bg-active)}.item-list .item p.title>a:active{color:#b8eeff;color:var(--clr-link-active)}.item-list .item .title.self>a{color:#ccc;color:var(--clr-fg)}.item-list .item .title.self>a:active{color:#d0d0d0;color:var(--clr-fg-active)}.item-list .item:not(:first-child){border-top-color:#999;border-top-color:var(--clr-line)}.loadmore-block{background-color:#2e353a;background-color:var(--clr-hotspot-bg)}.loadmore-block:active{background-color:#3e484f;background-color:var(--clr-hotspot-bg-active)}.options-content{padding:0 0 0 10px}.subreddit-item{position:relative;font-size:1.2em;padding:.4em 0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.subreddit-item:not(:first-child){border-top-style:solid;border-top-width:1px}.subreddit-item-text{position:absolute}.subreddit-item-delete{position:absolute;left:72%;padding:0 .5em}.subreddit-add-block{margin-bottom:1em}.txt-subreddit-add{width:50%}.subreddit-item:not(:first-child){border-top-color:#999;border-top-color:var(--clr-line)}.subreddit-item:active{background-color:#313131;background-color:var(--clr-bg-active)}.subreddit-item-delete{background-color:#383838;background-color:var(--clr-btn-deletesub-bg)}.subreddit-item-delete:active{background-color:#a10;background-color:var(--clr-btn-deletesub-bg-active)}.panel-sidebar .panel-head{padding-left:1.5em}.panel-sidebar .panel-content{padding-left:2em;padding-right:10%}.panel-sidebar .panel-content .meta-body{font-size:.85em;line-height:1.35em;margin-bottom:1em}.panel-sidebar .panel-content .meta-body hr{margin:.75em 0}.panel-sidebar .panel-content .meta-body h1,.panel-sidebar .panel-content .meta-body h2,.panel-sidebar .panel-content .meta-body h3,.panel-sidebar .panel-content .meta-body h4{margin:.4em 0;padding:0}.panel-article{box-shadow:0 0 50px rgba(0,0,0,.5);-webkit-transform:translate3d(105%,0,0);transform:translate3d(105%,0,0)}.article{-webkit-animation-duration:.3s;animation-duration:.3s;-webkit-animation-name:article-fade-in;animation-name:article-fade-in}.article .content-block{padding:.5em .5em .25em .5em;margin:1em .5em .7em .5em;border-style:solid;border-width:1px;overflow:auto}.article .content-block .title{padding-top:0;margin-top:0;font-size:1.1em}.article .content-block .body{word-wrap:break-word;font-size:.85em}.article .content-block .info{font-size:.7em;margin-bottom:.675em}.article .content-block .thumb{float:left;margin-right:.5em}.article .content-block .thumb img{cursor:pointer;transition:opacity .25s ease-in-out;opacity:0}.article .content-block .thumb img.show{opacity:1}.article .comments{overflow-x:hidden;margin-right:.5em}.article .comments .comment{margin:.1em 0 .1em .6em}.article .comments .comment .head{margin-top:.4em;font-size:.7em;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.article .comments .comment .head .author{font-weight:700}.article .comments .comment .head .meta .symbol{padding-left:.25em}.article .comments .comment .body{font-size:.85em;padding-left:.5em;padding-right:.1em;padding-bottom:.2em;border-left-style:solid;border-left-width:2px;border-bottom-style:solid;border-bottom-width:1px;margin-bottom:.6em}.article .comments .comment.collapsed .body{display:none}.article .comments .comment.collapsed .comment{display:none}@-webkit-keyframes article-fade-in{from{opacity:0}to{opacity:1}}@keyframes article-fade-in{from{opacity:0}to{opacity:1}}.panel-article{background-color:#222;background-color:var(--clr-bg)}.article .content-block{background-color:#2b2b2b;background-color:var(--clr-article-bg);border-color:#888;border-color:var(--clr-border)}.article .comments .comment .head:active .author,.article .comments .comment .head:active .meta{background-color:#313131;background-color:var(--clr-bg-active)}.article .comments .comment .body{border-left-color:#555;border-left-color:var(--clr-border-soft);border-bottom-color:#555;border-bottom-color:var(--clr-border-soft)}.viewer{position:absolute;display:flex;justify-content:center;align-items:center;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,.9);transition:opacity .3s;opacity:0}.viewer.show{opacity:1}.viewer .image{-o-object-fit:contain;object-fit:contain;-o-object-position:center;object-position:center;width:100%;height:100%;cursor:pointer;transition:opacity .3s;opacity:0}.viewer .image.show{opacity:1}.viewer .video{transition:opacity .3s;opacity:0}.viewer .video.show{opacity:1}.viewer .loading{position:absolute;display:flex;justify-content:center;align-items:center;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,.9);transition:opacity 1s;opacity:0}.viewer .loading.show{opacity:1}.loading-spinner .bar{display:inline-block;width:.5em;height:2em;background-color:#666;margin:0 .375em;-webkit-animation:bar-anim 2s infinite;animation:bar-anim 2s infinite}@-webkit-keyframes bar-anim{0%{background-color:#222}50%{background-color:#ccc}100%{background-color:#222}}@keyframes bar-anim{0%{background-color:#222}50%{background-color:#ccc}100%{background-color:#222}}.viewer .content{color:#ccc;color:var(--clr-viewer-fg)}.menu{position:absolute;left:0;top:0;width:100%;height:100%;opacity:0;transition:opacity .25s}.menu .content{position:relative;left:0;top:0;width:100%;height:100%;display:flex;flex-direction:row;align-items:center;justify-content:center}.menu .content .block{position:relative;min-width:50%;max-width:75%;max-height:95%;display:inline-block;text-align:center;overflow:auto}.menu .content .block .title{padding:0 0 .6em 0;font-size:1.5em}.menu .content .block .items{box-shadow:10px 20px 20px rgba(0,0,0,.25)}.menu .content .block .items .item{padding:.5em 1em;font-size:1.2em;font-weight:700;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.menu .content .block .items .item:not(:first-child){border-top-style:solid;border-top-width:1px}.menu.show{opacity:1}.menu{background-color:rgba(0,0,0,.75);background-color:var(--clr-menu-bg)}.menu .content{color:#ccc;color:var(--clr-menu-fg)}.menu .content .block .items .item{color:#ddd;color:var(--clr-ctrl-fg);background-color:#2c2c2c;background-color:var(--clr-ctrl-bg)}.menu .content .block .items .item:not(:first-child){border-top-color:#555;border-top-color:var(--clr-border-soft)}.menu .content .block .items .item:active{color:#dfdfdf;color:var(--clr-ctrl-fg-active);background-color:#3b3b3b;background-color:var(--clr-ctrl-bg-active)}.logger{display:inline-block;position:absolute;right:.5em;bottom:.5em;font-family:monospace;font-size:.75em;color:#6c0;background-color:rgba(0,0,0,.5)}</style>
<link rel="icon" sizes="192x192" href="img/icon.png"/>
<link rel="apple-touch-icon" sizes="192x192" href="img/icon.png"/>
</head>
<body>
<script>!function o(a,l,u){function s(t,e){if(!l[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=l[t]={exports:{}};a[t][0].call(i.exports,function(e){return s(a[t][1][e]||e)},i,i.exports,o,a,l,u)}return l[t].exports}for(var c="function"==typeof require&&require,e=0;e<u.length;e++)s(u[e]);return s}({1:[function(e,t,n){!function(){"use strict";function u(i,e){var t;if(e=e||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=e.touchBoundary||10,this.layer=i,this.tapDelay=e.tapDelay||200,this.tapTimeout=e.tapTimeout||700,!u.notNeeded(i)){for(var n=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],r=this,o=0,a=n.length;o<a;o++)r[n[o]]=l(r[n[o]],r);s&&(i.addEventListener("mouseover",this.onMouse,!0),i.addEventListener("mousedown",this.onMouse,!0),i.addEventListener("mouseup",this.onMouse,!0)),i.addEventListener("click",this.onClick,!0),i.addEventListener("touchstart",this.onTouchStart,!1),i.addEventListener("touchmove",this.onTouchMove,!1),i.addEventListener("touchend",this.onTouchEnd,!1),i.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(i.removeEventListener=function(e,t,n){var r=Node.prototype.removeEventListener;"click"===e?r.call(i,e,t.hijacked||t,n):r.call(i,e,t,n)},i.addEventListener=function(e,t,n){var r=Node.prototype.addEventListener;"click"===e?r.call(i,e,t.hijacked||(t.hijacked=function(e){e.propagationStopped||t(e)}),n):r.call(i,e,t,n)}),"function"==typeof i.onclick&&(t=i.onclick,i.addEventListener("click",function(e){t(e)},!1),i.onclick=null)}function l(e,t){return function(){return e.apply(t,arguments)}}}var e=0<=navigator.userAgent.indexOf("Windows Phone"),s=0<navigator.userAgent.indexOf("Android")&&!e,l=/iP(ad|hone|od)/.test(navigator.userAgent)&&!e,c=l&&/OS 4_\d(_\d)?/.test(navigator.userAgent),d=l&&/OS [6-7]_\d/.test(navigator.userAgent),i=0<navigator.userAgent.indexOf("BB10");u.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(l&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},u.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!s;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},u.prototype.sendClick=function(e,t){var n,r;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),r=t.changedTouches[0],(n=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(e),!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},u.prototype.determineEventType=function(e){return s&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},u.prototype.focus=function(e){var t;l&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},u.prototype.updateScrollParent=function(e){var t,n;if(!(t=e.fastClickScrollParent)||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},u.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},u.prototype.onTouchStart=function(e){var t,n,r;if(1<e.targetTouches.length)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],l){if((r=window.getSelection()).rangeCount&&!r.isCollapsed)return!0;if(!c){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},u.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n},u.prototype.onTouchMove=function(e){return this.trackingClick&&(this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0},u.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},u.prototype.onTouchEnd=function(e){var t,n,r,i,o,a=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,d&&(o=e.changedTouches[0],(a=document.elementFromPoint(o.pageX-window.pageXOffset,o.pageY-window.pageYOffset)||a).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(r=a.tagName.toLowerCase())){if(t=this.findControl(a)){if(this.focus(a),s)return!1;a=t}}else if(this.needsFocus(a))return 100<e.timeStamp-n||l&&window.top!==window&&"input"===r?this.targetElement=null:(this.focus(a),this.sendClick(a,e),l&&"select"===r||(this.targetElement=null,e.preventDefault())),!1;return!(!l||c||!(i=a.fastClickScrollParent)||i.fastClickLastScrollTop===i.scrollTop)||(this.needsClick(a)||(e.preventDefault(),this.sendClick(a,e)),!1)},u.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},u.prototype.onMouse=function(e){return!this.targetElement||(!!e.forwardedTouchEvent||(!e.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1))))},u.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,!(this.trackingClick=!1)):"submit"===e.target.type&&0===e.detail||((t=this.onMouse(e))||(this.targetElement=null),t)},u.prototype.destroy=function(){var e=this.layer;s&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},u.notNeeded=function(e){var t,n,r;if(void 0===window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!s)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(31<n&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(i&&10<=(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]&&3<=r[2]&&(t=document.querySelector("meta[name=viewport]"))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction||(!!(27<=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]&&(t=document.querySelector("meta[name=viewport]"))&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||("none"===e.style.touchAction||"manipulation"===e.style.touchAction))},u.attach=function(e,t){return new u(e,t)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return u}):void 0!==t&&t.exports?(t.exports=u.attach,t.exports.FastClick=u):window.FastClick=u}()},{}],2:[function(e,M,t){(function(x,L){!function(){"use strict";function A(e,t,n,r,i,o){return{tag:e,key:t,attrs:n,children:r,text:i,dom:o,domSize:void 0,state:void 0,_state:void 0,events:void 0,instance:void 0,skip:!1}}A.normalize=function(e){return Array.isArray(e)?A("[",void 0,void 0,A.normalizeChildren(e),void 0,void 0):null!=e&&"object"!=typeof e?A("#",void 0,void 0,!1===e?"":e,void 0,void 0):e},A.normalizeChildren=function(e){for(var t=0;t<e.length;t++)e[t]=A.normalize(e[t]);return e};var u=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,s={},c={}.hasOwnProperty;function d(e){for(var t in e)if(c.call(e,t))return!1;return!0}function e(e){var t,n=arguments[1],r=2;if(null==e||"string"!=typeof e&&"function"!=typeof e&&"function"!=typeof e.view)throw Error("The selector must be either a string or a component.");if("string"==typeof e)var i=s[e]||function(e){for(var t,n="div",r=[],i={};t=u.exec(e);){var o=t[1],a=t[2];if(""===o&&""!==a)n=a;else if("#"===o)i.id=a;else if("."===o)r.push(a);else if("["===t[3][0]){var l=t[6];l&&(l=l.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===t[4]?r.push(l):i[t[4]]=""===l?l:l||!0}}return 0<r.length&&(i.className=r.join(" ")),s[e]={tag:n,attrs:i}}(e);if(null==n?n={}:("object"!=typeof n||null!=n.tag||Array.isArray(n))&&(n={},r=1),arguments.length===r+1)t=arguments[r],Array.isArray(t)||(t=[t]);else for(t=[];r<arguments.length;)t.push(arguments[r++]);var o=A.normalizeChildren(t);return"string"==typeof e?function(e,t,n){var r,i,o=!1,a=t.className||t.class;if(!d(e.attrs)&&!d(t)){var l={};for(var u in t)c.call(t,u)&&(l[u]=t[u]);t=l}for(var u in e.attrs)c.call(e.attrs,u)&&(t[u]=e.attrs[u]);for(var u in void 0!==a&&(void 0!==t.class&&(t.class=void 0,t.className=a),null!=e.attrs.className&&(t.className=e.attrs.className+" "+a)),t)if(c.call(t,u)&&"key"!==u){o=!0;break}return Array.isArray(n)&&1===n.length&&null!=n[0]&&"#"===n[0].tag?i=n[0].children:r=n,A(e.tag,t.key,o?t:void 0,r,i)}(i,n,o):A(e,n.key,n,o)}e.trust=function(e){return null==e&&(e=""),A("<",void 0,void 0,e,void 0,void 0)},e.fragment=function(e,t){return A("[",e.key,e,A.normalizeChildren(t),void 0,void 0)};var t=e;if((f=function(e){if(!(this instanceof f))throw new Error("Promise must be called with `new`");if("function"!=typeof e)throw new TypeError("executor must be a function");var o=this,a=[],l=[],i=t(a,!0),u=t(l,!1),s=o._instance={resolvers:a,rejectors:l},c="function"==typeof L?L:setTimeout;function t(r,i){return function t(n){var e;try{if(!i||null==n||"object"!=typeof n&&"function"!=typeof n||"function"!=typeof(e=n.then))c(function(){i||0!==r.length||console.error("Possible unhandled promise rejection:",n);for(var e=0;e<r.length;e++)r[e](n);a.length=0,l.length=0,s.state=i,s.retry=function(){t(n)}});else{if(n===o)throw new TypeError("Promise can't be resolved w/ itself");d(e.bind(n))}}catch(e){u(e)}}}function d(e){var n=0;function t(t){return function(e){0<n++||t(e)}}var r=t(u);try{e(t(i),r)}catch(e){r(e)}}d(e)}).prototype.then=function(e,t){var i,o,a=this._instance;function n(t,e,n,r){e.push(function(e){if("function"!=typeof t)n(e);else try{i(t(e))}catch(e){o&&o(e)}}),"function"==typeof a.retry&&r===a.state&&a.retry()}var r=new f(function(e,t){i=e,o=t});return n(e,a.resolvers,i,!0),n(t,a.rejectors,o,!1),r},f.prototype.catch=function(e){return this.then(null,e)},f.resolve=function(t){return t instanceof f?t:new f(function(e){e(t)})},f.reject=function(n){return new f(function(e,t){t(n)})},f.all=function(l){return new f(function(n,r){var i=l.length,o=0,a=[];if(0===l.length)n([]);else for(var e=0;e<l.length;e++)!function(t){function e(e){o++,a[t]=e,o===i&&n(a)}null==l[t]||"object"!=typeof l[t]&&"function"!=typeof l[t]||"function"!=typeof l[t].then?e(l[t]):l[t].then(e,r)}(e)})},f.race=function(r){return new f(function(e,t){for(var n=0;n<r.length;n++)r[n].then(e,t)})},"undefined"!=typeof window){void 0===window.Promise&&(window.Promise=f);var f=window.Promise}else if(void 0!==x){void 0===x.Promise&&(x.Promise=f);f=x.Promise}var v=function(e){if("[object Object]"!==Object.prototype.toString.call(e))return"";var r=[];for(var t in e)i(t,e[t]);return r.join("&");function i(e,t){if(Array.isArray(t))for(var n=0;n<t.length;n++)i(e+"["+n+"]",t[n]);else if("[object Object]"===Object.prototype.toString.call(t))for(var n in t)i(e+"["+n+"]",t[n]);else r.push(encodeURIComponent(e)+(null!=t&&""!==t?"="+encodeURIComponent(t):""))}},p=new RegExp("^file://","i"),n=function(u,r){var t,o=0;function a(){var i=0;function o(){0==--i&&"function"==typeof t&&t()}return function t(n){var r=n.then;return n.then=function(){i++;var e=r.apply(n,arguments);return e.then(o,function(e){if(o(),0===i)throw e}),t(e)},n}}function s(e,t){if("string"==typeof e){var n=e;null==(e=t||{}).url&&(e.url=n)}return e}function c(e,t){if(null==t)return e;for(var n=e.match(/:[^\/]+/gi)||[],r=0;r<n.length;r++){var i=n[r].slice(1);null!=t[i]&&(e=e.replace(n[r],t[i]))}return e}function d(e,t){var n=v(t);if(""!==n){var r=e.indexOf("?")<0?"?":"&";e+=r+n}return e}function f(t){try{return""!==t?JSON.parse(t):null}catch(e){throw new Error(t)}}function m(e){return e.responseText}function h(e,t){if("function"==typeof e){if(!Array.isArray(t))return new e(t);for(var n=0;n<t.length;n++)t[n]=new e(t[n])}return t}return{request:function(l,e){var t=a();l=s(l,e);var n=new r(function(r,i){null==l.method&&(l.method="GET"),l.method=l.method.toUpperCase();var e="GET"!==l.method&&"TRACE"!==l.method&&("boolean"!=typeof l.useBody||l.useBody);"function"!=typeof l.serialize&&(l.serialize="undefined"!=typeof FormData&&l.data instanceof FormData?function(e){return e}:JSON.stringify),"function"!=typeof l.deserialize&&(l.deserialize=f),"function"!=typeof l.extract&&(l.extract=m),l.url=c(l.url,l.data),e?l.data=l.serialize(l.data):l.url=d(l.url,l.data);var o=new u.XMLHttpRequest,a=!1,t=o.abort;for(var n in o.abort=function(){a=!0,t.call(o)},o.open(l.method,l.url,"boolean"!=typeof l.async||l.async,"string"==typeof l.user?l.user:void 0,"string"==typeof l.password?l.password:void 0),l.serialize!==JSON.stringify||!e||l.headers&&l.headers.hasOwnProperty("Content-Type")||o.setRequestHeader("Content-Type","application/json; charset=utf-8"),l.deserialize!==f||l.headers&&l.headers.hasOwnProperty("Accept")||o.setRequestHeader("Accept","application/json, text/*"),l.withCredentials&&(o.withCredentials=l.withCredentials),l.headers)({}).hasOwnProperty.call(l.headers,n)&&o.setRequestHeader(n,l.headers[n]);"function"==typeof l.config&&(o=l.config(o,l)||o),o.onreadystatechange=function(){if(!a&&4===o.readyState)try{var e=l.extract!==m?l.extract(o,l):l.deserialize(l.extract(o,l));if(200<=o.status&&o.status<300||304===o.status||p.test(l.url))r(h(l.type,e));else{var t=new Error(o.responseText);for(var n in e)t[n]=e[n];i(t)}}catch(e){i(e)}},e&&null!=l.data?o.send(l.data):o.send()});return!0===l.background?n:t(n)},jsonp:function(i,e){var t=a();i=s(i,e);var n=new r(function(t,e){var n=i.callbackName||"_mithril_"+Math.round(1e16*Math.random())+"_"+o++,r=u.document.createElement("script");u[n]=function(e){r.parentNode.removeChild(r),t(h(i.type,e)),delete u[n]},r.onerror=function(){r.parentNode.removeChild(r),e(new Error("JSONP request failed")),delete u[n]},null==i.data&&(i.data={}),i.url=c(i.url,i.data),i.data[i.callbackKey||"callback"]=n,r.src=d(i.url,i.data),u.document.documentElement.appendChild(r)});return!0===i.background?n:t(n)},setCompletionCallback:function(e){t=e}}}(window,f),r=function(e){var a,f=e.document,s=f.createDocumentFragment(),t={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function m(e){return e.attrs&&e.attrs.xmlns||t[e.tag]}function y(e,t,n,r,i,o,a){for(var l=n;l<r;l++){var u=t[l];null!=u&&_(e,u,i,a,o)}}function _(e,t,n,r,i){var o,a,l,u=t.tag;if("string"!=typeof u)return function(e,t,n,r,i){{if(v(t,n),null!=t.instance){var o=_(e,t.instance,n,r,i);return t.dom=t.instance.dom,t.domSize=null!=t.dom?t.instance.domSize:0,x(e,o,i),o}return t.domSize=0,s}}(e,t,n,r,i);switch(t.state={},null!=t.attrs&&O(t.attrs,t,n),u){case"#":return o=e,l=i,(a=t).dom=f.createTextNode(a.children),x(o,a.dom,l),a.dom;case"<":return h(e,t,i);case"[":return function(e,t,n,r,i){var o=f.createDocumentFragment();if(null!=t.children){var a=t.children;y(o,a,0,a.length,n,null,r)}return t.dom=o.firstChild,t.domSize=o.childNodes.length,x(e,o,i),o}(e,t,n,r,i);default:return function(e,t,n,r,i){var o=t.tag,a=t.attrs,l=a&&a.is,u=(r=m(t)||r)?l?f.createElementNS(r,o,{is:l}):f.createElementNS(r,o):l?f.createElement(o,{is:l}):f.createElement(o);t.dom=u,null!=a&&function(e,t,n){for(var r in t)b(e,r,null,t[r],n)}(t,a,r);if(x(e,u,i),null!=t.attrs&&null!=t.attrs.contenteditable)g(t);else if(null!=t.text&&(""!==t.text?u.textContent=t.text:t.children=[A("#",void 0,void 0,t.text,void 0,void 0)]),null!=t.children){var s=t.children;y(u,s,0,s.length,n,null,r),d=(c=t).attrs,"select"===c.tag&&null!=d&&("value"in d&&b(c,"value",null,d.value,void 0),"selectedIndex"in d&&b(c,"selectedIndex",null,d.selectedIndex,void 0))}var c,d;return u}(e,t,n,r,i)}}function h(e,t,n){var r={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"}[(t.children.match(/^\s*?<(\w+)/im)||[])[1]]||"div",i=f.createElement(r);i.innerHTML=t.children,t.dom=i.firstChild,t.domSize=i.childNodes.length;for(var o,a=f.createDocumentFragment();o=i.firstChild;)a.appendChild(o);return x(e,a,n),a}function v(e,t){var n;if("function"==typeof e.tag.view){if(e.state=Object.create(e.tag),null!=(n=e.state.view).$reentrantLock$)return s;n.$reentrantLock$=!0}else{if(e.state=void 0,null!=(n=e.tag).$reentrantLock$)return s;n.$reentrantLock$=!0,e.state=null!=e.tag.prototype&&"function"==typeof e.tag.prototype.view?new e.tag(e):e.tag(e)}if(e._state=e.state,null!=e.attrs&&O(e.attrs,e,t),O(e._state,e,t),e.instance=A.normalize(e._state.view.call(e.state,e)),e.instance===e)throw Error("A view cannot return the vnode it received as argument");n.$reentrantLock$=null}function p(e,t,n,r,i,o,a){if(t!==n&&(null!=t||null!=n))if(null==t)y(e,n,0,n.length,i,o,a);else if(null==n)L(t,0,t.length,n);else{if(t.length===n.length){for(var l=!1,u=0;u<n.length;u++)if(null!=n[u]&&null!=t[u]){l=null==n[u].key&&null==t[u].key;break}if(l){for(u=0;u<t.length;u++)t[u]!==n[u]&&(null==t[u]&&null!=n[u]?_(e,n[u],i,a,S(t,u+1,o)):null==n[u]?L(t,u,u+1,n):k(e,t[u],n[u],i,S(t,u+1,o),r,a));return}}if(r=r||function(e,t){if(null!=e.pool&&Math.abs(e.pool.length-t.length)<=Math.abs(e.length-t.length)){var n=e[0]&&e[0].children&&e[0].children.length||0,r=e.pool[0]&&e.pool[0].children&&e.pool[0].children.length||0,i=t[0]&&t[0].children&&t[0].children.length||0;if(Math.abs(r-i)<=Math.abs(n-i))return!0}return!1}(t,n)){var s=t.pool;t=t.concat(t.pool)}for(var c,d=0,f=0,m=t.length-1,h=n.length-1;d<=m&&f<=h;){if((p=t[d])!==(g=n[f])||r)if(null==p)d++;else if(null==g)f++;else if(p.key===g.key){var v=null!=s&&d>=t.length-s.length||null==s&&r;f++,k(e,p,g,i,S(t,++d,o),v,a),r&&p.tag===g.tag&&x(e,T(p),o)}else{if((p=t[m])!==g||r)if(null==p)m--;else if(null==g)f++;else{if(p.key!==g.key)break;v=null!=s&&m>=t.length-s.length||null==s&&r;k(e,p,g,i,S(t,m+1,o),v,a),(r||f<h)&&x(e,T(p),S(t,d,o)),m--,f++}else m--,f++}else d++,f++}for(;d<=m&&f<=h;){var p,g;if((p=t[m])!==(g=n[h])||r)if(null==p)m--;else if(null==g)h--;else if(p.key===g.key){v=null!=s&&m>=t.length-s.length||null==s&&r;k(e,p,g,i,S(t,m+1,o),v,a),r&&p.tag===g.tag&&x(e,T(p),o),null!=p.dom&&(o=p.dom),m--,h--}else{if(c||(c=E(t,m)),null!=g){var w=c[g.key];if(null!=w){var b=t[w];v=null!=s&&w>=t.length-s.length||null==s&&r;k(e,b,g,i,S(t,m+1,o),r,a),x(e,T(b),o),t[w].skip=!0,null!=b.dom&&(o=b.dom)}else{o=_(e,g,i,a,o)}}h--}else m--,h--;if(h<f)break}y(e,n,f,h+1,i,o,a),L(t,d,m+1,n)}}function k(e,t,n,r,i,o,a){var l,u,s,c,d=t.tag;if(d===n.tag){if(n.state=t.state,n._state=t._state,n.events=t.events,!o&&function(e,t){var n,r;null!=e.attrs&&"function"==typeof e.attrs.onbeforeupdate&&(n=e.attrs.onbeforeupdate.call(e.state,e,t));"string"!=typeof e.tag&&"function"==typeof e._state.onbeforeupdate&&(r=e._state.onbeforeupdate.call(e.state,e,t));if(!(void 0===n&&void 0===r||n||r))return e.dom=t.dom,e.domSize=t.domSize,e.instance=t.instance,!0;return!1}(n,t))return;if("string"==typeof d)switch(null!=n.attrs&&(o?(n.state={},O(n.attrs,n,r)):P(n.attrs,n,r)),d){case"#":!function(e,t){e.children.toString()!==t.children.toString()&&(e.dom.nodeValue=t.children);t.dom=e.dom}(t,n);break;case"<":l=e,s=n,c=i,(u=t).children!==s.children?(T(u),h(l,s,c)):(s.dom=u.dom,s.domSize=u.domSize);break;case"[":!function(e,t,n,r,i,o,a){p(e,t.children,n.children,r,i,o,a);var l=0,u=n.children;if((n.dom=null)!=u){for(var s=0;s<u.length;s++){var c=u[s];null!=c&&null!=c.dom&&(null==n.dom&&(n.dom=c.dom),l+=c.domSize||1)}1!==l&&(n.domSize=l)}}(e,t,n,o,r,i,a);break;default:!function(e,t,n,r,i){var o=t.dom=e.dom;i=m(t)||i,"textarea"===t.tag&&(null==t.attrs&&(t.attrs={}),null!=t.text&&(t.attrs.value=t.text,t.text=void 0));(function(e,t,n,r){if(null!=n)for(var i in n)b(e,i,t&&t[i],n[i],r);if(null!=t)for(var i in t)null!=n&&i in n||("className"===i&&(i="class"),"o"!==i[0]||"n"!==i[1]||M(i)?"key"!==i&&e.dom.removeAttribute(i):C(e,i,void 0))})(t,e.attrs,t.attrs,i),null!=t.attrs&&null!=t.attrs.contenteditable?g(t):null!=e.text&&null!=t.text&&""!==t.text?e.text.toString()!==t.text.toString()&&(e.dom.firstChild.nodeValue=t.text):(null!=e.text&&(e.children=[A("#",void 0,void 0,e.text,void 0,e.dom.firstChild)]),null!=t.text&&(t.children=[A("#",void 0,void 0,t.text,void 0,void 0)]),p(o,e.children,t.children,n,r,null,i))}(t,n,o,r,a)}else!function(e,t,n,r,i,o,a){if(o)v(n,r);else{if(n.instance=A.normalize(n._state.view.call(n.state,n)),n.instance===n)throw Error("A view cannot return the vnode it received as argument");null!=n.attrs&&P(n.attrs,n,r),P(n._state,n,r)}null!=n.instance?(null==t.instance?_(e,n.instance,r,a,i):k(e,t.instance,n.instance,r,i,o,a),n.dom=n.instance.dom,n.domSize=n.instance.domSize):null!=t.instance?(w(t.instance,null),n.dom=void 0,n.domSize=0):(n.dom=t.dom,n.domSize=t.domSize)}(e,t,n,r,i,o,a)}else w(t,null),_(e,n,r,a,i)}function E(e,t){var n={},r=0;for(r=0;r<t;r++){var i=e[r];if(null!=i){var o=i.key;null!=o&&(n[o]=r)}}return n}function T(e){var t=e.domSize;if(null!=t||null==e.dom){var n=f.createDocumentFragment();if(0<t){for(var r=e.dom;--t;)n.appendChild(r.nextSibling);n.insertBefore(r,n.firstChild)}return n}return e.dom}function S(e,t,n){for(;t<e.length;t++)if(null!=e[t]&&null!=e[t].dom)return e[t].dom;return n}function x(e,t,n){n&&n.parentNode?e.insertBefore(t,n):e.appendChild(t)}function g(e){var t=e.children;if(null!=t&&1===t.length&&"<"===t[0].tag){var n=t[0].children;e.dom.innerHTML!==n&&(e.dom.innerHTML=n)}else if(null!=e.text||null!=t&&0!==t.length)throw new Error("Child node of a contenteditable must be trusted")}function L(e,t,n,r){for(var i=t;i<n;i++){var o=e[i];null!=o&&(o.skip?o.skip=!1:w(o,r))}}function w(r,i){var e,o=1,a=0;r.attrs&&"function"==typeof r.attrs.onbeforeremove&&(null!=(e=r.attrs.onbeforeremove.call(r.state,r))&&"function"==typeof e.then&&(o++,e.then(t,t)));"string"!=typeof r.tag&&"function"==typeof r._state.onbeforeremove&&(null!=(e=r._state.onbeforeremove.call(r.state,r))&&"function"==typeof e.then&&(o++,e.then(t,t)));function t(){if(++a===o&&(function e(t){t.attrs&&"function"==typeof t.attrs.onremove&&t.attrs.onremove.call(t.state,t);if("string"!=typeof t.tag)"function"==typeof t._state.onremove&&t._state.onremove.call(t.state,t),null!=t.instance&&e(t.instance);else{var n=t.children;if(Array.isArray(n))for(var r=0;r<n.length;r++){var i=n[r];null!=i&&e(i)}}}(r),r.dom)){var e=r.domSize||1;if(1<e)for(var t=r.dom;--e;)l(t.nextSibling);l(r.dom),null==i||null!=r.domSize||null!=(n=r.attrs)&&(n.oncreate||n.onupdate||n.onbeforeremove||n.onremove)||"string"!=typeof r.tag||(i.pool?i.pool.push(r):i.pool=[r])}var n}t()}function l(e){var t=e.parentNode;null!=t&&t.removeChild(e)}function b(e,t,n,r,i){var o=e.dom;if("key"!==t&&"is"!==t&&(n!==r||(a=e,"value"===(l=t)||"checked"===l||"selectedIndex"===l||"selected"===l&&a.dom===f.activeElement)||"object"==typeof r)&&void 0!==r&&!M(t)){var a,l,u,s,c=t.indexOf(":");if(-1<c&&"xlink"===t.substr(0,c))o.setAttributeNS("http://www.w3.org/1999/xlink",t.slice(c+1),r);else if("o"===t[0]&&"n"===t[1]&&"function"==typeof r)C(e,t,r);else if("style"===t)!function(e,t,n){t===n&&(e.style.cssText="",t=null);if(null==n)e.style.cssText="";else if("string"==typeof n)e.style.cssText=n;else{for(var r in"string"==typeof t&&(e.style.cssText=""),n)e.style[r]=n[r];if(null!=t&&"string"!=typeof t)for(var r in t)r in n||(e.style[r]="")}}(o,n,r);else if(t in o&&("href"!==(s=t)&&"list"!==s&&"form"!==s&&"width"!==s&&"height"!==s)&&void 0===i&&!((u=e).attrs.is||-1<u.tag.indexOf("-"))){if("value"===t){var d=""+r;if(("input"===e.tag||"textarea"===e.tag)&&e.dom.value===d&&e.dom===f.activeElement)return;if("select"===e.tag)if(null===r){if(-1===e.dom.selectedIndex&&e.dom===f.activeElement)return}else if(null!==n&&e.dom.value===d&&e.dom===f.activeElement)return;if("option"===e.tag&&null!=n&&e.dom.value===d)return}if("input"===e.tag&&"type"===t)return void o.setAttribute(t,r);o[t]=r}else"boolean"==typeof r?r?o.setAttribute(t,""):o.removeAttribute(t):o.setAttribute("className"===t?"class":t,r)}}function M(e){return"oninit"===e||"oncreate"===e||"onupdate"===e||"onremove"===e||"onbeforeremove"===e||"onbeforeupdate"===e}function C(e,t,n){var r=e.dom,i="function"!=typeof a?n:function(e){var t=n.call(r,e);return a.call(r,e),t};if(t in r)r[t]="function"==typeof n?i:null;else{var o=t.slice(2);if(void 0===e.events&&(e.events={}),e.events[t]===i)return;null!=e.events[t]&&r.removeEventListener(o,e.events[t],!1),"function"==typeof n&&(e.events[t]=i,r.addEventListener(o,e.events[t],!1))}}function O(e,t,n){"function"==typeof e.oninit&&e.oninit.call(t.state,t),"function"==typeof e.oncreate&&n.push(e.oncreate.bind(t.state,t))}function P(e,t,n){"function"==typeof e.onupdate&&n.push(e.onupdate.bind(t.state,t))}return{render:function(e,t){if(!e)throw new Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var n=[],r=f.activeElement,i=e.namespaceURI;null==e.vnodes&&(e.textContent=""),Array.isArray(t)||(t=[t]),p(e,e.vnodes,A.normalizeChildren(t),!1,n,null,"http://www.w3.org/1999/xhtml"===i?void 0:i),e.vnodes=t,null!=r&&f.activeElement!==r&&r.focus();for(var o=0;o<n.length;o++)n[o]()},setEventCallback:function(e){return a=e}}};var i=function(e){var t=r(e);t.setEventCallback(function(e){!1===e.redraw?e.redraw=void 0:n()});var a=[];function l(e){var t=a.indexOf(e);-1<t&&a.splice(t,2)}function n(){for(var e=1;e<a.length;e+=2)a[e]()}return{subscribe:function(e,t){var n,r,i,o;l(e),a.push(e,(n=t,r=0,i=null,o="function"==typeof requestAnimationFrame?requestAnimationFrame:setTimeout,function(){var e=Date.now();0===r||16<=e-r?(r=e,n()):null===i&&(i=o(function(){i=null,n(),r=Date.now()},16-(e-r)))}))},unsubscribe:l,redraw:n,render:t.render}}(window);n.setCompletionCallback(i.redraw);var o;t.mount=(o=i,function(e,t){if(null===t)return o.render(e,[]),void o.unsubscribe(e);if(null==t.view&&"function"!=typeof t)throw new Error("m.mount(element, component) expects a component, not a vnode");o.subscribe(e,function(){o.render(e,A(t))}),o.redraw()});var a,l,m,h,g,w,b,y,_,k=f,E=function(e){if(""===e||null==e)return{};"?"===e.charAt(0)&&(e=e.slice(1));for(var t=e.split("&"),n={},r={},i=0;i<t.length;i++){var o=t[i].split("="),a=decodeURIComponent(o[0]),l=2===o.length?decodeURIComponent(o[1]):"";"true"===l?l=!0:"false"===l&&(l=!1);var u=a.split(/\]\[?|\[/),s=n;-1<a.indexOf("[")&&u.pop();for(var c=0;c<u.length;c++){var d=u[c],f=u[c+1],m=""==f||!isNaN(parseInt(f,10)),h=c===u.length-1;if(""===d)null==r[a=u.slice(0,c).join()]&&(r[a]=0),d=r[a]++;null==s[d]&&(s[d]=h?l:m?[]:{}),s=s[d]}}return n},T=function(c){var n,d="function"==typeof c.history.pushState,r="function"==typeof L?L:setTimeout;function e(e){var t=c.location[e].replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent);return"pathname"===e&&"/"!==t[0]&&(t="/"+t),t}function f(e,t,n){var r=e.indexOf("?"),i=e.indexOf("#"),o=-1<r?r:-1<i?i:e.length;if(-1<r){var a=-1<i?i:e.length,l=E(e.slice(r+1,a));for(var u in l)t[u]=l[u]}if(-1<i){var s=E(e.slice(i+1));for(var u in s)n[u]=s[u]}return e.slice(0,o)}var m={prefix:"#!",getPath:function(){switch(m.prefix.charAt(0)){case"#":return e("hash").slice(m.prefix.length);case"?":return e("search").slice(m.prefix.length)+e("hash");default:return e("pathname").slice(m.prefix.length)+e("search")+e("hash")}},setPath:function(e,n,t){var r={},i={};if(e=f(e,r,i),null!=n){for(var o in n)r[o]=n[o];e=e.replace(/:([^\/]+)/g,function(e,t){return delete r[t],n[t]})}var a=v(r);a&&(e+="?"+a);var l=v(i);if(l&&(e+="#"+l),d){var u=t?t.state:null,s=t?t.title:null;c.onpopstate(),t&&t.replace?c.history.replaceState(u,s,m.prefix+e):c.history.pushState(u,s,m.prefix+e)}else c.location.href=m.prefix+e}};return m.defineRoutes=function(l,u,s){function e(){var r=m.getPath(),i={},e=f(r,i,i),t=c.history.state;if(null!=t)for(var n in t)i[n]=t[n];for(var o in l){var a=new RegExp("^"+o.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(a.test(e))return void e.replace(a,function(){for(var e=o.match(/:[^\/]+/g)||[],t=[].slice.call(arguments,1,-2),n=0;n<e.length;n++)i[e[n].replace(/:|\./g,"")]=decodeURIComponent(t[n]);u(l[o],i,r,o)})}s(r,i)}var t;d?c.onpopstate=(t=e,function(){null==n&&(n=r(function(){n=null,t()}))}):"#"===m.prefix.charAt(0)&&(c.onhashchange=e),e()},m};t.route=(a=window,l=i,y=T(a),(_=function(e,t,n){if(null==e)throw new Error("Ensure the DOM element that was passed to `m.route` is not undefined");var o=function(){null!=m&&l.render(e,m(A(h,g.key,g)))},a=function(e){if(e===t)throw new Error("Could not resolve default route "+t);y.setPath(t,null,{replace:!0})};y.defineRoutes(n,function(t,n,r){var i=b=function(e,t){i===b&&(h=null==t||"function"!=typeof t.view&&"function"!=typeof t?"div":t,g=n,w=r,b=null,m=(e.render||function(e){return e}).bind(e),o())};t.view||"function"==typeof t?i({},t):t.onmatch?k.resolve(t.onmatch(n,r)).then(function(e){i(t,e)},a):i(t,"div")},a),l.subscribe(e,o)}).set=function(e,t,n){null!=b&&((n=n||{}).replace=!0),b=null,y.setPath(e,t,n)},_.get=function(){return w},_.prefix=function(e){y.prefix=e},_.link=function(e){e.dom.setAttribute("href",y.prefix+e.attrs.href),e.dom.onclick=function(e){if(!(e.ctrlKey||e.metaKey||e.shiftKey||2===e.which)){e.preventDefault(),e.redraw=!1;var t=this.getAttribute("href");0===t.indexOf(y.prefix)&&(t=t.slice(y.prefix.length)),_.set(t,void 0,void 0)}}},_.param=function(e){return void 0!==g&&void 0!==e?g[e]:g},_),t.withAttr=function(t,n,r){return function(e){n.call(r||this,t in e.currentTarget?e.currentTarget[t]:e.currentTarget.getAttribute(t))}};var S=r(window);t.render=S.render,t.redraw=i.redraw,t.request=n.request,t.jsonp=n.jsonp,t.parseQueryString=E,t.buildQueryString=v,t.version="1.1.6",t.vnode=A,void 0!==M?M.exports=t:window.m=t}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{timers:6}],3:[function(e,t,n){"use strict";t.exports=e("./stream/stream")},{"./stream/stream":4}],4:[function(e,n,t){!function(){"use strict";var t=0,i={};function a(){function e(){return 0<arguments.length&&arguments[0]!==i&&r(e,arguments[0]),e._state.value}var n;return(n=e).constructor=a,n._state={id:t++,value:void 0,state:0,derive:void 0,recover:void 0,deps:{},parents:[],endStream:void 0,unregister:void 0},n.map=n["fantasy-land/map"]=c,n["fantasy-land/ap"]=d,n["fantasy-land/of"]=a,n.valueOf=f,n.toJSON=m,n.toString=f,Object.defineProperties(n,{end:{get:function(){if(!n._state.endStream){var t=a();t.map(function(e){return!0===e&&(s(n),t._state.unregister=function(){s(t)}),e}),n._state.endStream=t}return n._state.endStream}}}),0<arguments.length&&arguments[0]!==i&&r(e,arguments[0]),e}function r(e,t){for(var n in o(e,t),e._state.deps)l(e._state.deps[n],!1);null!=e._state.unregister&&e._state.unregister(),function(e){for(var t in e._state.changed=!1,e._state.deps)e._state.deps[t]._state.changed=!1}(e)}function o(e,t){e._state.value=t,e._state.changed=!0,2!==e._state.state&&(e._state.state=1)}function l(e,t){var n=e._state.parents;if(0<n.length&&n.every(v)&&(t||n.some(p))){var r=e._state.derive();if(r===i)return!1;o(e,r)}}function u(e,t){if(!t.every(h))throw new Error("Ensure that each item passed to stream.combine/stream.merge is a stream");return n=a(),r=t,i=function(){return e.apply(this,t.concat([t.filter(p)]))},(o=n._state).derive=i,o.parents=r.filter(g),function e(t,n){for(var r=0;r<n.length;r++)n[r]._state.deps[t._state.id]=t,e(t,n[r]._state.parents)}(n,o.parents),l(n,!0),n;var n,r,i,o}function s(e){for(var t=0;t<e._state.parents.length;t++){delete e._state.parents[t]._state.deps[e._state.id]}for(var n in e._state.deps){var r=e._state.deps[n],i=r._state.parents.indexOf(e);-1<i&&r._state.parents.splice(i,1)}e._state.state=2,e._state.deps={}}function c(t){return u(function(e){return t(e())},[this])}function d(e){return u(function(e,t){return e()(t())},[e,this])}function f(){return this._state.value}function m(){return null!=this._state.value&&"function"==typeof this._state.value.toJSON?this._state.value.toJSON():this._state.value}function h(e){return e._state}function v(e){return 1===e._state.state}function p(e){return e._state.changed}function g(e){return 2!==e._state.state}(a["fantasy-land/of"]=a).merge=function(e){return u(function(){return e.map(function(e){return e()})},e)},a.combine=u,a.scan=function(t,n,e){var r=u(function(e){return n=t(n,e._state.value)},[e]);return 0===r._state.state&&r(n),r},a.scanMerge=function(r,i){var e=r.map(function(e){var t=e[0];return 0===t._state.state&&t(void 0),t});return u(function(){var n=arguments[arguments.length-1];return e.forEach(function(e,t){-1<n.indexOf(e)&&(i=r[t][1](i,e._state.value))}),i},e)},a.HALT=i,void 0!==n?n.exports=a:"function"!=typeof window.m||"stream"in window.m?window.m={stream:a}:window.m.stream=a}()},{}],5:[function(e,t,n){var r,i,o=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function u(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{i="function"==typeof clearTimeout?clearTimeout:l}catch(e){i=l}}();var s,c=[],d=!1,f=-1;function m(){d&&s&&(d=!1,s.length?c=s.concat(c):f=-1,c.length&&h())}function h(){if(!d){var e=u(m);d=!0;for(var t=c.length;t;){for(s=c,c=[];++f<t;)s&&s[f].run();f=-1,t=c.length}s=null,d=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===l||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function v(e,t){this.fun=e,this.array=t}function p(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new v(e,t)),1!==c.length||d||u(h)},v.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=p,o.addListener=p,o.once=p,o.off=p,o.removeListener=p,o.removeAllListeners=p,o.emit=p,o.prependListener=p,o.prependOnceListener=p,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],6:[function(u,e,s){(function(e,t){var r=u("process/browser.js").nextTick,n=Function.prototype.apply,i=Array.prototype.slice,o={},a=0;function l(e,t){this._id=e,this._clearFn=t}s.setTimeout=function(){return new l(n.call(setTimeout,window,arguments),clearTimeout)},s.setInterval=function(){return new l(n.call(setInterval,window,arguments),clearInterval)},s.clearTimeout=s.clearInterval=function(e){e.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},s.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},s.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},s._unrefActive=s.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},s.setImmediate="function"==typeof e?e:function(e){var t=a++,n=!(arguments.length<2)&&i.call(arguments,1);return o[t]=!0,r(function(){o[t]&&(n?e.apply(null,n):e.call(null),s.clearImmediate(t))}),t},s.clearImmediate="function"==typeof t?t:function(e){delete o[e]}}).call(this,u("timers").setImmediate,u("timers").clearImmediate)},{"process/browser.js":5,timers:6}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("mithril"),i=e("../../lib/age");n.default=function(e,t){return r(".comments",e.map(function(e){return function t(e,n){return e&&e.author?r(".comment",r(".head",{onclick:function(e){e.currentTarget.parentElement.classList.toggle("collapsed"),e.redraw=!1}},r("span.author",e.author),r("span.meta"," "+e.score+" points "+i.default(n-+e.created_utc),e.edited&&"*",0<e.gilded&&r("span.symbol",r.trust("&#10024;")),0<e.controversiality&&r("span.symbol",r.trust("&dagger;")))),r(".body",e.body),e.replies.map(function(e){return t(e,n)})):null}(e,t)}))}},{"../../lib/age":32,mithril:2}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("mithril"),i=e("../../lib/browser"),o=e("../../lib/age"),a=e("./thumb"),l=e("./comments");n.default=function(t,e){var n=Date.now()/1e3;return r(".article",r(".content-block",e.articleThumbs&&a.default(t),r(".title",t.is_self?r.trust(t.title):r("a",i.isMobile.iOS&&i.isStandalone?{href:t.url}:{href:t.url,target:"_blank",rel:"noopener"},r.trust(t.title))),r("p.info",t.domain+" [+"+t.score+"] ",r("a",{href:"/r/"+t.subreddit,onclick:function(e){e.preventDefault(),e.redraw=!1,r.route.set("/r/"+t.subreddit,void 0,{replace:!0})}},"/r/"+t.subreddit)," "+o.default(n-t.created_utc)+" by "+t.author),t.body&&r("p.body",t.body)),l.default(t.comments,n))}},{"../../lib/age":32,"../../lib/browser":34,"./comments":7,"./thumb":10,mithril:2}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("mithril"),r=e("mithril/stream"),o=e("../../models/article"),a=e("../../models/options"),l=e("./content");n.default=r.combine(function(e,t){return n=e(),r=t(),i(".panel.panel-article",i(".panel-head",i(".btn-panelnav",{style:{marginRight:"0.5em"},onclick:function(e){e.redraw=!1,window.history.back()}},i.trust("&#9666;")),i("div",{style:{display:"inline-block"}},"Article comments")),i(".panel-content",n?l.default(n,r):i(".content-loading","Loading...")));var n,r},[o.article,a.preferences])},{"../../models/article":43,"../../models/options":46,"./content":8,mithril:2,"mithril/stream":3}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("mithril"),i=e("../../models/viewer");n.default=function(t){var e=t.thumb;return e?r(".thumb",r("img",{style:{width:e.width,height:e.height},onclick:function(e){i.default(t),e.redraw=!1,r.route.set("/viewer")},onload:function(e){e.currentTarget.classList.add("show"),e.redraw=!1},src:e.url})):null}},{"../../models/viewer":48,mithril:2}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("mithril"),i=e("../../lib/slider"),o=e("../../lib/slider3"),a=e("./menu-sort");n.default=function(e,t){return r(".panel-head",r("div",{style:{float:"left",maxWidth:"70%",overflow:"hidden",whiteSpace:"nowrap"}},r(".btn-panelnav",{style:{marginRight:"0.5em"},onclick:function(e){e.redraw=!1,o.default.getLayout()===i.CENTER?r.route.set("/options"):window.history.back()}},r.trust("&#9666;")),r("div",{style:{display:"inline-block"}},t)),r("div",{style:{float:"right",textAlign:"right"}},a.default(e),r(".btn-panelnav",{style:{marginLeft:"0.25em"},onclick:function(e){e.redraw=!1,o.default.getLayout()===i.CENTER?r.route.set("/sidebar"):window.history.back()}},r.trust("&#9656;"))))}},{"../../lib/slider":38,"../../lib/slider3":39,"./menu-sort":16,mithril:2}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("mithril"),r=e("mithril/stream"),l=e("../../models/feed"),i=e("../../models/options"),u=e("./head"),s=e("./item-list"),c=e("./loadmore");n.default=r.combine(function(e,t){return n=e(),r=l.subreddit(),i=l.title(),o=t(),a(".panel.panel-feed",u.default(r,i),a(".panel-content",n?[a(".item-list",s.default(r,n.items,o)),n.after&&c.default(n.after)]:a(".content-loading","loading...")));var n,r,i,o},[l.itemList,i.preferences])},{"../../models/feed":44,"../../models/options":46,"./head":11,"./item-list":13,"./loadmore":15,mithril:2,"mithril/stream":3}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./item");n.default=function(t,e,n){var r=Date.now()/1e3;return(n.nsfw?e:e.filter(function(e){return!e.over_18})).map(function(e){return i.default(t,e,r,n)})}},{"./item":14}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("mithril"),o=e("../../lib/age"),a=e("../../lib/browser"),l=e("./thumb");n.default=function(e,t,n,r){return i(".item",{key:t.id},i(".left",r.feedThumbs&&t.thumbnail&&l.default(t),t.is_self?i("p",{class:"title self"},i("a",{href:t.permalink,oncreate:i.route.link},i.trust(t.title))):i("p",{class:"title"},i("a",a.isMobile.iOS&&a.isStandalone?{href:t.url}:{href:t.url,target:"_blank",rel:"noopener"},i.trust(t.title))),i("p.details",t.subreddit.toLowerCase()===e.toLowerCase()?"("+t.domain+") "+t.score+" points by "+t.author+" "+o.default(n-t.created_utc):["("+t.domain+") "+t.score+" points by "+t.author+" in ",i("a",{href:"/r/"+t.subreddit,oncreate:i.route.link},t.subreddit)," "+o.default(n-t.created_utc)])),i(".right",{onclick:function(e){e.redraw=!1,i.route.set(t.permalink)}},i("p","â"+t.num_comments+"â")))}},{"../../lib/age":32,"../../lib/browser":34,"./thumb":17,mithril:2}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("mithril"),i=e("../../models/feed");n.default=function(e){return r(".loadmore-block",{onclick:function(){i.loadMore(e)}},"load more articles...")}},{"../../models/feed":44,mithril:2}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("mithril"),i=e("../../models/menu"),o=[{id:"hot",text:"Hot"},{id:"new",text:"New"},{id:"rising",text:"Rising"},{id:"controversial",text:"Controversial"},{id:"top",text:"Top"}];n.default=function(t){return r(".btn-panelnav",{onclick:function(e){i.default({title:"Sort by",items:o.map(function(e){return{id:e.id,text:e.text}}),onselect:function(e){r.route.set("/r/"+t+"/"+e)}}),e.redraw=!1,r.route.set("/menu")}},r.trust("&middot;&middot;&middot;"))}},{"../../models/menu":45,mithril:2}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("mithril"),i=e("../../models/viewer"),o=e("../svg");n.default=function(n){return r(".thumb",{oncreate:function(e){var t=new Image;t.onload=function(){e.dom.classList.add("show")},t.src=n.thumbnail},onclick:function(e){i.default(n),e.redraw=!1,r.route.set("/viewer")},style:"background-image: url("+n.thumbnail+")"},n.media&&"video"===n.media.type&&o.playIcon())}},{"../../models/viewer":48,"../svg":27,mithril:2}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("mithril"),o=e("./viewer"),a=e("./menu"),l=e("./feed"),u=e("./options"),s=e("./sidebar"),c=e("./article");n.default={view:function(e){var t=e.attrs,n=t.menuOpen,r=t.viewerOpen;return i(".freddy",u.default(),s.default(),l.default(),c.default(),r&&i(o.default),n&&i(a.default),i(".logger"))}}},{"./article":9,"./feed":12,"./menu":19,"./options":20,"./sidebar":25,"./viewer":29,mithril:2}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("mithril"),i=e("../../lib/html"),o=e("../../lib/wait"),a=e("../../models/menu");n.default={oncreate:function(e){var t=e.dom;i.triggerTransition(t,"show")},onbeforeremove:function(e){var t=e.dom;return i.transitionPromise(t,"show")},view:function(){var n=a.default();if(n)return r(".menu",{onclick:function(e){e.redraw=!1,window.history.back()}},r(".content",r(".block",r(".title",n.title),r(".items",n.items.map(function(t){return r(".item",{onclick:function(e){e.stopPropagation(),e.redraw=!1,n.onselect&&o.default(2).then(function(){n.onselect&&n.onselect(t.id),r.redraw()}),window.history.back()}},t.text)})))));console.warn("menuContent empty")}}},{"../../lib/html":36,"../../lib/wait":41,"../../models/menu":45,mithril:2}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("mithril"),i=e("../../models/menu"),o=e("../../models/options"),a=e("../svg"),l=e("./subreddit-list"),u=e("./subreddit-add"),s=e("./pref-check");n.default=o.options.map(function(e){return t=e.preferences,n=e.subreddits,console.log("theme:",t.theme),r(".panel.panel-options",r(".panel-head",r("div",{style:{display:"inlineBlock"}},a.logo(),r("span","Freddy"))),r(".panel-content",r(".options-content",r("h2","Subreddits"),l.default(n),r("hr"),r(u.default),r("hr"),r(".options-block",r("h2","Preferences:"),r("p",{style:{marginBottom:"1em"}},r("span","Theme:"),r("button",{style:{marginLeft:"0.4em"},onclick:function(e){i.default({title:"Select Theme",text:"",items:o.THEMES.map(function(e){return{id:e.name,text:e.title}}),onselect:function(e){o.setPref("theme",e)}}),e.redraw=!1,r.route.set("/menu")}},o.THEMES.find(function(e){return e.name===t.theme}).title),s.default("articleThumbs","Show article images"),s.default("feedThumbs","Show thumbnail images"),s.default("nsfw","Show NSFW content (18+)")),r("hr"),r("p",{style:{textAlign:"center",margin:"1em 0"},onclick:function(e){i.default({title:"Reset all Subreddits and preferences to defaults?",text:"",items:[{id:"yes",text:"Yes"},{id:"no",text:"No"}],onselect:function(e){"yes"===e&&o.reset()}}),e.redraw=!1,r.route.set("/menu")}},r("button","Reset to defaults"))))));var t,n})},{"../../models/menu":45,"../../models/options":46,"../svg":27,"./pref-check":21,"./subreddit-add":22,"./subreddit-list":23,mithril:2}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("mithril"),i=e("../../models/options");n.default=function(t,e){return r("p",r("input",{type:"checkbox",checked:i.getPref(t),onchange:function(e){i.setPref(t,e.currentTarget.checked)}}),r("span"," "+e))}},{"../../models/options":46,mithril:2}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("mithril"),i=e("mithril/stream"),o=e("../../models/options");n.default={newSub:void 0,oninit:function(){this.newSub=i()},view:function(){var t=this;return r(".subreddit-add-block",r("h2","Add Subreddit:"),r("p",r("input",{class:"txt-subreddit-add",type:"text",maxlength:"21",oninput:function(e){t.newSub(e.currentTarget.value),e.redraw=!1},value:this.newSub()}),r("button",{style:{marginLeft:"0.4em"},onclick:function(){o.addSubreddit(t.newSub()),t.newSub("")}},"Add")))}}},{"../../models/options":46,mithril:2,"mithril/stream":3}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("mithril"),i=e("../../models/options"),o=e("../../models/menu");n.default=function(e){return r(".subreddit-list",e.map(function(t){return"frontpage"===t.toLowerCase()?r(".subreddit-item",{key:t,onclick:function(e){e.redraw=!1,r.route.set("/",void 0,{replace:!0})}},t):r(".subreddit-item",{key:t,onclick:function(e){e.redraw=!1,r.route.set("/r/"+t,void 0,{replace:!0})}},r(".subreddit-item-text","/r/"+t),r(".subreddit-item-delete",{onclick:function(e){e.stopPropagation(),o.default({title:'Are you sure you want to delete the subreddit "'+t+'"',items:[{id:"yes",text:"Yes"},{id:"no",text:"No"}],onselect:function(e){"yes"===e&&i.removeSubreddit(t)}}),e.redraw=!1,r.route.set("/menu")}},"-"),r("br",{clear:"all"}))}))}},{"../../models/menu":45,"../../models/options":46,mithril:2}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("mithril"),i=e("../../lib/browser");n.default=function(){return r("div",{style:{padding:"1em 0.4em 0 0"}},r("p",r("strong","Freddy.")," A fast Reddit reader."),r("p.small","Â© 2016-2018 By Mike Linkovich"),r("p",{style:{paddingTop:"0.5em"}},r("a",i.isStandaloneIOS?{href:"https://github.com/spacejack/freddy"}:{href:"https://github.com/spacejack/freddy",target:"_blank",rel:"noopener"},"Github Repo")),!i.isStandalone&&r("p",{style:{fontSize:"0.75em"}},"This app works better when you add it to your homescreen."))}},{"../../lib/browser":34,mithril:2}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("mithril"),i=e("../../models/feed"),o=e("./app-info"),a=e("./subreddit-info");n.default=i.about.map(function(e){return r(".panel.panel-sidebar",r(".panel-head","Sidebar"),r(".panel-content",o.default(),e&&a.default(e)))})},{"../../models/feed":44,"./app-info":24,"./subreddit-info":26,mithril:2}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("mithril");n.default=function(e){return r("div",{style:{padding:"1em 0.4em 0 0"}},r("hr"),r("h2",e.display_name),r(".meta-body",r("p","Subscribers: ","number"==typeof e.subscribers?String(e.subscribers.toString()):"?"),r("p",e.body)))}},{mithril:2}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("mithril");n.logo=function(){return r.trust('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 255.10962 289.3222" class="svg-logo"><path d="M255.11 0l-23.242 260.36-104.47 28.962-104.181-28.921L0 0h255.11z" fill="#e44d26"/><path d="M127.555 267.185l84.417-23.404 19.86-222.49H127.556v245.894z" fill="#f18429"/><g transform="matrix(.5596 0 0 .5596 39.078 32.855)"><circle transform="matrix(12.58495 0 0 12.58495 -606.282 6.476)" r="2.702" cy="11.836" cx="49.684" fill="#fff" stroke="#321e1e" stroke-width="1.42"/><circle transform="matrix(12.58495 0 0 12.58495 -606.282 6.476)" r="2.702" cy="11.836" cx="71.786" fill="#fff" stroke="#321e1e" stroke-width="1.42"/><path d="M252.339 36.076l-68.01-16.008-24.993 79.008" fill="none" stroke="#321e1e" stroke-width="17.87" stroke-linecap="round" stroke-linejoin="round"/><circle transform="matrix(12.58495 0 0 12.58495 -606.282 6.476)" r="2.13" cy="2.789" cx="70.431" fill="#fff" stroke="#321e1e" stroke-width="1.42"/><ellipse transform="matrix(12.58495 0 0 12.58495 -606.282 6.476)" ry="7.987" rx="12.238" cy="15.552" cx="60.676" fill="#fff" stroke="#321e1e" stroke-width="1.42"/><path d="M103.971 157.504c-13.68 0-25.156 11.476-25.156 25.156 0 13.68 11.476 24.782 25.156 24.782 13.68 0 24.781-11.102 24.781-24.782s-11.1-25.156-24.78-25.156zM212.534 157.504c-13.687 0-25.188 11.47-25.188 25.156 0 13.687 11.5 24.782 25.188 24.782 13.687 0 24.78-11.095 24.78-24.782 0-13.686-11.093-25.156-24.78-25.156z" fill="#ff4500"/><path d="M104.856 248.472c13.415 13.416 35.061 15.996 53.008 15.996M211.274 248.472c-13.428 13.416-35.062 15.996-53.02 15.996" fill="none" stroke="#321e1e" stroke-width="13.843445000000001" stroke-linecap="round"/><circle transform="matrix(12.58495 0 0 12.58495 -781.196 145.9)" r="2.13" cy="2.789" cx="70.431" fill="#60d9ff" stroke="#321e1e" stroke-width="1.1"/><circle transform="matrix(12.58495 0 0 12.58495 -676.417 145.9)" r="2.13" cy="2.789" cx="70.431" fill="#60d9ff" stroke="#321e1e" stroke-width="1.1"/><path fill="#321e1e" d="M129.335 162.289h56.615v16.9h-56.615z"/></g></svg>')},n.playIcon=function(){return r.trust('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 101.67 101.671" height="384.268" width="384.266"><g fill="#fff"><path d="M50.835.5A50.335 50.335 0 0 0 .5 50.835a50.335 50.335 0 0 0 50.335 50.336 50.335 50.335 0 0 0 50.335-50.336A50.335 50.335 0 0 0 50.835.5zm0 13.875a36.46 36.46 0 0 1 36.461 36.46 36.46 36.46 0 0 1-36.46 36.461 36.46 36.46 0 0 1-36.462-36.46 36.46 36.46 0 0 1 36.461-36.461z"/><path d="M40.717 27.748L72.66 50.19 40.717 72.845z"/></g></svg>')}},{mithril:2}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("mithril"),o=e("../../lib/html");n.default={view:function(e){var t=e.attrs,n=t.media,r=t.onLoad;return i("img.image",{src:n.url,touchAction:"none",onload:function(e){o.triggerTransition(e.currentTarget,"show"),r&&r()},onclick:function(e){e.stopPropagation(),e.redraw=!1,window.history.back()}})}}},{"../../lib/html":36,mithril:2}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("mithril"),i=e("../../lib/html"),o=e("../../models/viewer"),a=e("./image"),l=e("./video"),u=e("./loading");n.default=function(){var t,e=!0;return{oninit:function(){var e=o.default();e&&e.media?t=e.media:console.warn("No item for viewer to display")},oncreate:function(e){var t=e.dom;i.triggerTransition(t,"show")},onbeforeremove:function(e){var t=e.dom;return i.transitionPromise(t,"show")},view:function(){return r(".viewer",{onclick:function(e){e.redraw=!1,window.history.back()}},"image"===t.type?r(a.default,{media:t,onLoad:function(){e=!1}}):r(l.default,{media:t,onLoad:function(){e=!1}}),e&&r(u.default))}}}},{"../../lib/html":36,"../../models/viewer":48,"./image":28,"./loading":30,"./video":31,mithril:2}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("mithril"),i=e("../../lib/html");n.default=function(){var n;return{oncreate:function(e){var t=e.dom;n=setTimeout(function(){t.classList.add("show"),n=void 0},1e3)},onbeforeremove:function(e){var t=e.dom;return null!=n?(clearTimeout(n),n=void 0,Promise.resolve()):i.transitionPromise(t,"show")},view:function(){return r(".loading",r(".loading-spinner",[r(".bar",{style:"animation-delay: 0s"}),r(".bar",{style:"animation-delay: 0.25s"}),r(".bar",{style:"animation-delay: 0.5s"}),r(".bar",{style:"animation-delay: 0.75s"})]))}}}},{"../../lib/html":36,mithril:2}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("mithril");n.default=function(e){var n,t=e.attrs.media,r=t.width||240,i=t.height||240;function o(){var e=n.parentElement.getBoundingClientRect(),t=r/i>e.width/e.height;n.style.width=t?"100%":"auto",n.style.height=t?"auto":"100%"}return{oncreate:function(e){n=e.dom,o(),window.addEventListener("resize",o)},onremove:function(){window.removeEventListener("resize",o)},view:function(e){var n=e.attrs.onLoad;return a("video.video",{src:t.url,autoplay:!0,controls:!0,loop:!0,playsinline:!0,oncanplay:function(e){var t=e.currentTarget;r=t.videoWidth,i=t.videoHeight,o(),t.classList.add("show"),n&&n()},onclick:function(e){e.stopPropagation(),e.redraw=!1,window.history.back()}})}}}},{mithril:2}],32:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function(e){var t,n,r,i=e;return i<60?n="just now":(i<3600?(t=Math.round(i/60),r="minute"):i<86400?(t=Math.round(i/3600),r="hour"):i<1036800?(t=Math.round(i/86400),r="day"):i<31536e3?(t=Math.round(i/1036800),r="month"):(t=Math.round(i/31536e3),r="year"),1<t&&(r+="s"),n=t+" "+r+" ago"),n}},{}],33:[function(e,t,n){"use strict";function o(e,t){e.style.transform="translate3d("+t+"px,0,0)"}function a(r,i,o,a,l){var u=Date.now(),s=i-r;!function e(){var t,n=Date.now()-u;o<=n?(a(i),l&&l()):(t=Math.pow(n/o,.4),a(r+t*s),requestAnimationFrame(e))}()}Object.defineProperty(n,"__esModule",{value:!0}),n.setPosX=o,n.easeOutLoop=a,n.easeOutX=function(t,e,n,r,i){a(e,n,r,function(e){o(t,e)},i)}},{}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.protocol=window.location.protocol,n.hostname=window.location.hostname,n.port=window.location.port,n.baseUrl=n.protocol+"//"+n.hostname+(n.port?":"+n.port:""),n.pixelRatio=window.devicePixelRatio||1,n.isSecure=0<=n.protocol.indexOf("https"),n.isFramed=window.self!==window.top,n.screenSize={width:window.screen.width*n.pixelRatio,height:window.screen.height*n.pixelRatio},n.isStandalone=null!=navigator.standalone?!!navigator.standalone:window.external&&window.external.msIsSiteMode?window.external.msIsSiteMode():!!window.matchMedia("(display-mode: standalone)").matches;var r,i,o,a,l,u,s=["spacejack.ca","spacejack.github"];n.domainIsLocal=function(e){var t=((e||n.hostname)+"").toLowerCase();return s.find(function(e){return 0<=t.indexOf(e)})},n.isMobile=(r=!!navigator.userAgent.match(/Android/i),i=!!navigator.userAgent.match(/BlackBerry/i),o=!!navigator.userAgent.match(/iPhone|iPad|iPod/i),a=!!navigator.userAgent.match(/Opera Mini/i),l=!!navigator.userAgent.match(/IEMobile/i),u=!!navigator.userAgent.match(/\(Mobile/i),{Android:r,BlackBerry:i,iOS:o,Opera:a,Windows:l,FireFox:u,any:r||i||o||a||l||u}),n.isStandaloneIOS=n.isStandalone&&n.isMobile.iOS},{}],35:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var C=e("./speedo");n.default=function(n,e){var t=void 0===e?{}:e,a=t.ondragstart,l=t.ondragmove,r=t.ondragend,i=t.ondragcancel,o=t.dragThreshold,u=void 0===o?12:o,s=t.dragRatio,c=void 0===s?1.5:s,d=t.maxLeft,f=t.maxRight;O&&!P&&(window.addEventListener("touchmove",function(){}),P=!0);var m=C.default(),h=0,v=!1,p=!1,g={x:0,y:0};function w(e){2!==h&&(M(),0===e.button&&(h=1,window.addEventListener("mousemove",b),window.addEventListener("mouseup",y),T(e.clientX,e.clientY)))}function b(e){S(e.clientX,e.clientY,e)}function y(e){window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",y),x(e.clientX,e.clientY)}function _(e){if(1!==h){M(),h=2,n.addEventListener("touchmove",k),n.addEventListener("touchend",E);var t=e.changedTouches[0];T(t.clientX,t.clientY)}}function k(e){var t=e.changedTouches[0];S(t.clientX,t.clientY,e)}function E(e){n.removeEventListener("touchmove",k),n.removeEventListener("touchend",E);var t=e.changedTouches[0];x(t.clientX,t.clientY)}function T(e,t){v=!0,g.x=e,g.y=t,m.start(0,Date.now()/1e3),document.addEventListener("scroll",L,!0)}function S(e,t,n){if(v){var r=e-g.x;null!=d&&(r=Math.max(r,d())),null!=f&&(r=Math.min(r,f()));var i=t-g.y;if(m.addSample(r,Date.now()/1e3),!p){var o=0!==i?Math.abs(r/i):1e9;if(Math.abs(r)<u||o<c)return;p=!0,a&&a(r)}n.preventDefault(),l&&l(r,m.getVel())}}function x(e,t){if(document.removeEventListener("scroll",L,!0),v=!1,p){p=!1;var n=e-g.x;m.addSample(n,Date.now()/1e3),setTimeout(function(){v||(h=0)},300),r&&r(n,m.getVel())}}function L(e){M()}function M(){v&&(1===h?(window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",y)):2===h&&(n.removeEventListener("touchmove",k),n.removeEventListener("touchend",E)),document.removeEventListener("scroll",L,!0),v=!1,p&&(p=!1,i&&i()))}return n.addEventListener("mousedown",w),n.addEventListener("touchstart",_),{destroy:function(){n.removeEventListener("mousedown",w),window.removeEventListener("mouseup",y),window.removeEventListener("mousemove",b),n.removeEventListener("touchstart",_),n.removeEventListener("touchend",E),n.removeEventListener("touchmove",k),document.removeEventListener("scroll",L,!0)}}};var O=!!navigator.userAgent.match(/iPhone|iPad|iPod/i),P=!1},{"./speedo":40}],36:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var u=e("./browser");function r(e){e.offsetHeight}function s(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0].nodeValue||""}function c(e){if(e)return e.startsWith("/r/")?"#!"+e:e.startsWith("http://www.reddit.com/r/")?"#!"+e.substr(21):e.startsWith("https://www.reddit.com/r/")?"#!"+e.substr(22):e.startsWith("http://reddit.com/r/")?"#!"+e.substr(17):e.startsWith("https://reddit.com/r/")?"#!"+e.substr(18):void 0}n.readyDom=r,n.triggerTransition=function(e,t){r(e),e.classList.add(t)},n.transitionPromise=function(t,e){return e&&t.classList.toggle(e),new Promise(function(e){t.addEventListener("transitionend",e)})},n.loadCSS=function(e){var t=document.head.querySelector("link#theme-css");t?t.href!==e&&(t.href=e):((t=document.createElement("link")).id="theme-css",t.rel="stylesheet",t.type="text/css",t.href=e,document.head.appendChild(t))},n.unescape=s,n.prepEscapedHtml=function(e){var t=document.createElement("div");t.innerHTML=s(e);for(var n=t.querySelectorAll("a"),r=0;r<n.length;++r){var i=n[r],o=i.href,a=o.startsWith(u.baseUrl)?"https://www.reddit.com"+o.substr(u.baseUrl.length):o,l=c(a);l&&(a=l),a!==o&&(i.href=a),u.isStandaloneIOS||"#"===a[0]||(i.target="_blank",i.rel="noopener")}return t.innerHTML},n.appLink=c},{"./browser":34}],37:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.sign=function(e){return 0<e?1:e<0?-1:0},n.clamp=function(e,t,n){return Math.min(Math.max(e,t),n)},n.length2d=function(e,t){return Math.sqrt(e*e+t*t)},n.pmod=function(e,t){return(e%t+t)%t},n.roundFrac=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}},{}],38:[function(e,t,y){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var _=e("mithril/stream"),k=e("../lib/dragger"),E=e("../lib/anim"),T=e("../lib/math");function n(c,d,t,a,e){var n,r,f,i,m=_(e),h=_(100),v=h.map(function(e){return e*t}),o=_.combine(function(e,t){return t()*(c-e())},[m,v]),l=_.combine(function(e,t){return t()*(d-e())},[m,v]),u=_(m()),s=u.map(function(e){return"translate3d("+S(e*t*100)+",0,0)"});function p(e){var t=v(),n=T.clamp(m()*t+e,-t,t);u(n/t)}function g(e,t){var n=v(),r=h(),i=m(),o=e/n+i,a=t/r,l=i,u=!1;if(Math.abs(e+a*r*.2)>n/2){var s=T.sign(e+50*a);l=T.clamp(i+s,c,d),u=!0}else a=0;w(o,l,Math.abs(.25*a)).then(function(e){u&&f&&f(e)})}function w(t,n,e){void 0===e&&(e=0),t=T.clamp(t,-1,1);var r=n-t,i=Math.max(e,1),o=a*Math.abs(r)/i;return new Promise(function(e){E.easeOutLoop(t,n,o,u,function(){m(n),requestAnimationFrame(function(){e(m())})})})}function b(){if(r){var e=r.getBoundingClientRect();h(e.width)}}return{mount:function(e,t){null==n?(f=t,r=e,s.map(function(e){r.style.transform=e}),n=k.default(r,{ondragstart:p,ondragmove:p,ondragend:g,maxLeft:o,maxRight:l}),window.addEventListener("resize",b),b()):console.warn("slider already mounted")},unmount:function(){null!=n?(n.destroy(),n=void 0,s.end(!0),f=n=r=void 0,m(y.CENTER),window.removeEventListener("resize",b)):console.warn("slider not mounted")},xpos:u,setLayout:function(e){return e===m()||e===i?Promise.resolve(e):(i=e,w(m(),e).then(function(e){return i=void 0,e}))},getLayout:m}}function S(e){var t=T.roundFrac(e,4);return 0===t?"0":t+"%"}y.LEFT=-1,y.CENTER=0,y.RIGHT=1,y.create=n,y.pctStr=S,y.default=n(y.CENTER,y.RIGHT,1.05,340,y.RIGHT)},{"../lib/anim":33,"../lib/dragger":35,"../lib/math":37,"mithril/stream":3}],39:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=e("./slider");function r(e,t,i,n,r){var o,a,l,u=s.create(e,t,i,n,r);return{mount:function(e,t,n,r){l?console.warn("slider3 already mounted"):(u.mount(e,r),o=t,a=n,(l=u.xpos.map(function(e){return e})).map(function(e){var t,n;o.style.transform="translate3d("+(t=e,s.pctStr(100*(.5*t-.5)))+",0,0)",a.style.transform="translate3d("+(n=e,s.pctStr(100*((.5*n+.5)*i+(1-i))))+",0,0)"}))},unmount:function(){l?(u.unmount(),l.end(!0),l=o=a=void 0):console.warn("slider3 already unmounted")},getLayout:u.getLayout,setLayout:u.setLayout}}n.create=r,n.default=r(s.LEFT,s.RIGHT,.87,300,s.CENTER)},{"./slider":38}],40:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var u=e("./math");n.default=function(i){void 0===i&&(i=4);for(var o=0,a=0,l=new Array(i),e=0;e<i;++e)l[e]={x:0,t:0};return{start:function(e,t){a=o=0,l[o].x=e,l[o].t=t,a=o=1},addSample:function(e,t){l[o].x=e,l[o].t=t,o=(o+1)%i,a+=1},getVel:function(){if(a<1)return 0;var e=i<a?i:a,t=u.pmod(o-1,i),n=u.pmod(o-e,i),r=l[t].t-l[n].t;return(l[t].x-l[n].x)/r}}}},{"./math":37}],41:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(r){return!r||r<1?Promise.resolve():new Promise(function(t){var n=0;!function e(){r<=n?t():(++n,requestAnimationFrame(e))}()})}},{}],42:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("fastclick"),i=e("mithril"),o=e("./lib/wait"),a=e("./lib/slider3"),l=e("./lib/slider"),u=e("./models/options"),s=e("./routes");function c(){i.route(document.body,"/",s.default),o.default(2).then(function(){var e=document.querySelector(".freddy");a.default.mount(e.querySelector(".panel-feed"),e.querySelector(".panel-options"),e.querySelector(".panel-sidebar"),function(e){e===l.CENTER?window.history.back():e===l.LEFT?i.route.set("/sidebar"):e===l.RIGHT&&i.route.set("/options")}),l.default.mount(e.querySelector(".panel-article"),function(e){e===l.RIGHT&&window.history.back()})})}u.load(),r(document.body),"#!/options"===window.location.hash||"#!/sidebar"===window.location.hash?(window.history.replaceState(void 0,"","#!/"),o.default(1).then(c)):c(),t.hot&&t.hot.accept()},{"./lib/slider":38,"./lib/slider3":39,"./lib/wait":41,"./models/options":46,"./routes":49,fastclick:1,mithril:2}],43:[function(e,t,u){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var n,i=e("mithril"),r=e("mithril/stream"),s=e("../lib/browser"),o=e("../lib/html"),a=e("../lib/math"),l=e("./feed"),c=e("./reddit");function d(e){var t=JSON.parse(e),n=t[0].data.children[0].data,r=t[1].data.children;return{id:n.id,title:n.title,url:n.url,permalink:n.permalink,author:n.author,subreddit:n.subreddit,is_self:n.is_self,body:n.selftext_html?i.trust(o.prepEscapedHtml(n.selftext_html)):void 0,domain:n.domain,score:n.score,created_utc:n.created_utc,num_comments:n.num_comments,over_18:n.over_18,thumbnail:n.thumbnail,media:l.getItemMedia(n),upvote_ratio:n.upvote_ratio,thumb:function(e){var t,n,r=u.THUMB_MAX_WIDTH,i=u.THUMB_MAX_HEIGHT;if(e.is_self||!e.thumbnail||"self"===e.thumbnail)return;if((t=e.thumbnail).indexOf("http://")<0&&t.indexOf("https://")<0)return;if(e.preview&&(n=e.preview.images)&&0<n.length){var o=n[0].source;r=o.width,i=o.height}s.isSecure&&(t=t.replace("http://","https://"));var a=Math.min(Math.round(r/i*u.THUMB_MAX_HEIGHT),u.THUMB_MAX_WIDTH),l=u.THUMB_MAX_HEIGHT;return{url:t,width:f(a)+"em",height:f(l)+"em"}}(n),comments:r.map(function(e){return function t(e){var n={author:e.author,body:i.trust(o.prepEscapedHtml(e.body_html)),score:e.score,created_utc:e.created_utc,edited:e.edited,gilded:e.gilded,controversiality:e.controversiality,replies:e.replies?e.replies.data.children.map(function(e){return t(e.data)}):[]};return n}(e.data)})}}function f(e){return a.roundFrac(e/18,3)}u.THUMB_MAX_HEIGHT=133,u.THUMB_MAX_WIDTH=200,u.article=r(void 0),u.load=function(e,t){n!==e&&(n=e,u.article(void 0),e=c.BASE_URL+e+".json",i.request({url:e,extract:function(e){return e.responseText},background:!0}).then(function(e){t?t.then(function(){u.article(d(e)),i.redraw()}):(u.article(d(e)),i.redraw())}))}},{"../lib/browser":34,"../lib/html":36,"../lib/math":37,"./feed":44,"./reddit":47,mithril:2,"mithril/stream":3}],44:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=e("mithril"),n=e("mithril/stream"),u=e("./reddit"),r=e("../lib/browser"),i=e("../lib/html");function s(e){return{id:e.id,title:e.title,url:e.url,permalink:e.permalink,author:e.author,subreddit:e.subreddit,is_self:e.is_self,domain:e.domain,score:e.score,created_utc:e.created_utc,num_comments:e.num_comments,over_18:e.over_18,thumbnail:e.thumbnail&&e.thumbnail.startsWith("https://")?e.thumbnail:"",media:o(e)}}function c(e){var t=JSON.parse(e);return{items:t.data.children.map(function(e){return s(e.data)}),before:t.data.before,after:t.data.after}}function d(e){var t=JSON.parse(e).data;return{display_name:t.display_name,body:l.trust(i.prepEscapedHtml(t.description_html)),subscribers:t.subscribers}}function o(e){return e.media&&null!=e.media.reddit_video?function(e){if(!e.media||null==e.media.reddit_video)return;var t=e.media.reddit_video;return{type:"video",url:t.fallback_url,width:t.width,height:t.height}}(e):function(e){if(!e.preview||!e.preview.images||e.preview.images.length<1)return;var t=e.preview.images[0].resolutions;if(!t||t.length<1)return;var n=function(e,t,n){for(var r=e.length,i=0;i<r;++i){var o=e[i];if(o.width>=t||o.height>=n)return o}return e[r-1]}(t,r.screenSize.width,r.screenSize.height);return n?{type:"image",url:i.unescape(n.url),width:n.width,height:n.height}:void 0}(e)}function f(e){var t=a.itemList();if(!t)throw new Error("Cannot appendData - no existing list");for(var n=t.items,r=e.data.children,i=function(e){var t=r[e];n.find(function(e){return e.id===t.data.id})||n.push(s(t.data))},o=0;o<r.length;++o)i(o);t.after=e.data.after,a.itemList(t)}a.itemList=n(void 0),a.about=n(void 0),a.order=n(""),a.title=n(""),a.subreddit=n(""),a.sortby=n(void 0),a.getItemMedia=o,a.load=function(e,t,n){if(a.subreddit()!==e||a.sortby()!==t){a.subreddit(e),a.sortby(t),a.title("frontpage"===e.toLowerCase()?"Frontpage":"/r/"+e),a.itemList(void 0),a.about(void 0);var r,i,o=(i=t,"frontpage"===(r=e).toLowerCase()?{feed:u.BASE_URL+"/"+(i||"")+".json",about:void 0}:{feed:u.BASE_URL+"/r/"+r+(i?"/"+i:"")+".json",about:u.BASE_URL+"/r/"+r+"/about.json"});a.order(t&&"hot"!==t?t:""),l.request({url:o.feed,method:"GET",extract:function(e){return e.responseText},background:!0}).then(function(e){n?n.then(function(){a.itemList(c(e)),l.redraw()}):(a.itemList(c(e)),l.redraw())}),o.about&&l.request({url:o.about,method:"GET",extract:function(e){return e.responseText},background:!0}).then(function(e){n?n.then(function(){a.about(d(e)),l.redraw()}):(a.about(d(e)),l.redraw())})}},a.loadMore=function(e){if(a.itemList())if(e){var t="frontpage"===a.subreddit().toLowerCase()?u.BASE_URL+"/"+(a.order()?a.order():"")+".json":u.BASE_URL+"/r/"+a.subreddit()+(a.order()?"/"+a.order():"")+".json";t+="?after="+e,l.request({url:t,method:"GET"}).then(f)}else console.warn("No after token");else console.warn("No feed loaded yet")}},{"../lib/browser":34,"../lib/html":36,"./reddit":47,mithril:2,"mithril/stream":3}],45:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("mithril/stream");n.default=r()},{"mithril/stream":3}],46:[function(e,t,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var n=e("mithril/stream"),i=e("../lib/html"),u=e("./reddit");l.THEMES=[{name:"dark",title:"Dark"},{name:"light",title:"Light"}];var r={theme:l.THEMES[0].name,articleThumbs:!0,feedThumbs:!0,nsfw:!1},o=["Frontpage","all","art","askreddit","books","funny","gadgets","gaming","javascript","movies","music","pics","programming","science","television","videos","webdev","worldnews"];function s(){window.localStorage.setItem("freddy_subreddits",JSON.stringify(l.subreddits()))}function a(){window.localStorage.setItem("freddy_preferences",JSON.stringify(l.preferences()))}l.preferences=n(r),l.subreddits=n(o),l.options=n.combine(function(e,t){return{preferences:e(),subreddits:t()}},[l.preferences,l.subreddits]),l.getPref=function(e){return l.preferences()[e]},l.setPref=function(e,t){var n,r=l.preferences();r[e]!==t&&("theme"===e&&i.loadCSS("themes/"+t+".css"),l.preferences(Object.assign({},r,((n={})[e]=t,n))),a())},l.addSubreddit=function(e){var t=function(e){if(!e||"string"!=typeof e)return null;var t=e.trim();return t.length<1||t.length>u.MAX_SUB_LENGTH?null:t.match(u.SUB_RX)?null:t}(e);if(t){var n,r,i=t.toLowerCase(),o=l.subreddits().slice();for(n=1,r=o.length;n<r;++n){var a=o[n].toLowerCase();if(i===a)return void console.warn("Subreddit '"+t+"' already added");if(i<a)break}o.splice(n,0,t),l.subreddits(o),s()}else console.warn("Invalid subreddit: '"+e+"'")},l.removeSubreddit=function(e){var t=e.toLowerCase(),n=l.subreddits().findIndex(function(e){return e.toLowerCase()===t});if(n<0)console.warn("Subreddit '"+e+"' not found");else{var r=l.subreddits().slice();r.splice(n,1),l.subreddits(r),s()}},l.load=function(){!function(){var t,e=window.localStorage.getItem("freddy_preferences");if(e){try{t=JSON.parse(e)}catch(e){return console.warn("Error parsing preferences")}l.preferences({articleThumbs:!!t.articleThumbs,feedThumbs:!!t.feedThumbs,nsfw:!!t.nsfw,theme:l.THEMES.some(function(e){return e.name===t.theme})?t.theme:l.THEMES[0].name}),l.preferences().theme!==l.THEMES[0].name&&i.loadCSS("themes/"+l.preferences().theme+".css")}}(),function(){var e,t=window.localStorage.getItem("freddy_subreddits");if(t){try{e=JSON.parse(t)}catch(e){return console.warn("Error parsing saved subreddits")}l.subreddits(e)}}()},l.reset=function(){window.localStorage.removeItem("freddy_subreddits"),window.localStorage.removeItem("freddy_preferences"),l.subreddits(o),l.preferences(r),s(),a()}},{"../lib/html":36,"./reddit":47,"mithril/stream":3}],47:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BASE_URL="https://www.reddit.com",n.MAX_SUB_LENGTH=40,n.SUB_RX=/[^0-9A-Za-z_]/},{}],48:[function(e,t,n){arguments[4][45][0].apply(n,arguments)},{dup:45,"mithril/stream":3}],49:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("mithril"),i=e("./models/feed"),o=e("./models/article"),a=e("./freddy"),l=e("./lib/slider"),u=e("./lib/slider3");n.default={"/":{onmatch:function(){return i.load("Frontpage",void 0,u.default.setLayout(l.CENTER)),l.default.setLayout(l.RIGHT),a.default}},"/options":{onmatch:function(){return u.default.setLayout(l.RIGHT),l.default.setLayout(l.RIGHT),a.default}},"/sidebar":{onmatch:function(){return u.default.setLayout(l.LEFT),l.default.setLayout(l.RIGHT),a.default}},"/viewer":{render:function(){return r(a.default,{viewerOpen:!0})}},"/menu":{render:function(){return r(a.default,{menuOpen:!0})}},"/r/:subreddit":{onmatch:function(e){return i.load(e.subreddit,void 0,u.default.setLayout(l.CENTER)),l.default.setLayout(l.RIGHT),a.default}},"/r/:subreddit/:sortby":{onmatch:function(e){return i.load(e.subreddit,e.sortby,u.default.setLayout(l.CENTER)),l.default.setLayout(l.RIGHT),a.default}},"/r/:subreddit/comments/:postid/:slug":{onmatch:function(e){return o.load("/r/"+e.subreddit+"/comments/"+e.postid+"/"+e.slug,l.default.setLayout(l.CENTER)),a.default}},"/r/:subreddit/comments/:postid/:slug/:comment":{onmatch:function(e){return o.load("/r/"+e.subreddit+"/comments/"+e.postid+"/"+e.slug+"/"+e.comment,l.default.setLayout(l.CENTER)),a.default}}}},{"./freddy":18,"./lib/slider":38,"./lib/slider3":39,"./models/article":43,"./models/feed":44,mithril:2}]},{},[42]);</script>
</body>
</html>
